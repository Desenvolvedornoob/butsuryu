import{s as t}from"./index-DHLiDs7l.js";const u=async(s,o,c)=>{try{const{data:r,error:e}=await t.from("profiles").select("factory_id").eq("id",s).single();if(e||!(r!=null&&r.factory_id))return console.error("Erro ao buscar perfil do usuÃ¡rio:",e),{isBlocked:!1};const{data:a,error:d}=await t.from("holidays").select("date, name").eq("factory_id",r.factory_id).eq("blocks_time_off",!0);if(d)return console.error("Erro ao buscar feriados bloqueados:",d),{isBlocked:!1};if(!a||a.length===0)return{isBlocked:!1};const i=a.find(f=>{const l=f.date;return l>=o&&l<=c});return i?{isBlocked:!0,blockedDate:{date:i.date,name:i.name}}:{isBlocked:!1}}catch(r){return console.error("Erro ao verificar feriados bloqueados:",r),{isBlocked:!1}}},y=async s=>{try{const{data:o,error:c}=await t.from("profiles").select("factory_id").eq("id",s).single();if(c||!(o!=null&&o.factory_id))return[];const{data:r,error:e}=await t.from("holidays").select("date").eq("factory_id",o.factory_id).eq("blocks_time_off",!0);return e?(console.error("Erro ao buscar feriados bloqueados:",e),[]):(r==null?void 0:r.map(a=>a.date))||[]}catch(o){return console.error("Erro ao buscar feriados bloqueados:",o),[]}};export{u as checkBlockedDates,y as getBlockedDatesForUser};
